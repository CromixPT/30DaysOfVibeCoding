/* Diary style layout */
.diary-shell { max-width: 680px; margin: 0 auto; padding:0 1rem; }
/* Center header content while keeping vertical rhythm */
.diary-header { display:flex; flex-direction:column; gap:.75rem; margin-bottom:1.25rem; align-items:center; text-align:center; }
/* Center all child items; allow wrapping so + button drops below on very narrow screens */
.diary-header-row { display:flex; justify-content:center; align-items:center; flex-wrap:wrap; gap:1rem; width:100%; }
.mode-toggle { display:inline-flex; background:#f1f3f5; border:1px solid #d9dee3; border-radius:.9rem; padding:.25rem; gap:.25rem; }
.mode-btn { background:transparent; border:none; padding:.45rem .9rem; font-size:.65rem; font-weight:600; letter-spacing:.6px; text-transform:uppercase; border-radius:.55rem; color:#5c646d; cursor:pointer; transition:background .18s ease, color .18s ease; }
.mode-btn.active { background:#fff; color:#1f2428; box-shadow:0 2px 4px -2px rgba(0,0,0,.15); }
.mode-btn:not(.active):hover { background:#e2e6ea; }
.add-entry-btn { background:linear-gradient(145deg,#ffb347,#ffa63d); color:#fff; width:3rem; height:3rem; border:none; border-radius:1rem; display:flex; align-items:center; justify-content:center; font-weight:600; box-shadow:0 10px 22px -10px rgba(255,154,38,.6),0 4px 10px -4px rgba(255,154,38,.4); transition:transform .22s ease, box-shadow .22s ease; padding:0; }
.add-entry-btn .add-icon { font-size:1.55rem; line-height:1; }
.add-entry-btn:hover { transform:translateY(-3px); box-shadow:0 14px 28px -12px rgba(255,154,38,.65),0 6px 14px -6px rgba(255,154,38,.45); }
.add-entry-btn:active { transform:translateY(0) scale(.94); }
/* Primary Add button inside modal */
.primary-add-btn { background:linear-gradient(145deg,#ffb347,#ffa63d); color:#fff; border:none; padding:.7rem 1.35rem; border-radius:1rem; font-weight:600; font-size:.9rem; letter-spacing:.25px; box-shadow:0 6px 18px -8px rgba(255,154,38,.55),0 2px 6px -2px rgba(255,154,38,.35); transition:filter .18s ease, transform .18s ease, box-shadow .18s ease; }
.primary-add-btn:disabled { opacity:.45; cursor:not-allowed; box-shadow:none; }
.primary-add-btn:not(:disabled):hover { filter:brightness(1.05); box-shadow:0 10px 22px -10px rgba(255,154,38,.6),0 4px 10px -4px rgba(255,154,38,.45); }
.primary-add-btn:not(:disabled):active { transform:scale(.95); }
.diary-title-group { display:flex; align-items:baseline; gap:.75rem; }
.diary-title { font-size:2.15rem; font-weight:700; margin:0; }
.diary-month { display:inline-flex; flex-direction:column; line-height:1.05; font-weight:600; font-size:1rem; color:#7a8390; text-transform:none; }
.diary-month .month-line1 { font-size:.95rem; letter-spacing:.5px; text-transform:uppercase; opacity:.85; }
.diary-month .month-line2 { font-size:.7rem; letter-spacing:1.4px; text-transform:uppercase; color:#9aa4b0; }
/* Month navigation bar (replaces week bar) */
.month-bar { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-top:.5rem; }
.month-label-spacer { flex:1; }
.calendar-week { display:grid; grid-template-columns:repeat(7,1fr); gap:.65rem; flex:1; }
.week-nav-btn { background:#fff; border:1px solid #e4e8ee; color:#6b737c; width:2.1rem; height:2.1rem; border-radius:.75rem; font-size:1.15rem; display:flex; align-items:center; justify-content:center; line-height:1; cursor:pointer; transition:background .2s ease, color .2s ease, border-color .2s ease, transform .2s ease; box-shadow:0 2px 6px -2px rgba(0,0,0,.08); }
.week-nav-btn:hover { background:#f3f6f8; color:#394047; }
.week-nav-btn:active { transform:scale(.9); }
.cal-day { background:#fff; border:1px solid #e4e8ee; border-radius:1.1rem; padding:.55rem .35rem .75rem; text-align:center; position:relative; transition:background .25s ease, color .25s ease, border-color .25s ease; box-shadow:0 2px 6px -2px rgba(0,0,0,.05); }
.cal-day.today { background:linear-gradient(145deg,#fff6e5,#ffe9c5); border-color:#ffd08a; box-shadow:0 4px 12px -6px rgba(0,0,0,.08); }
.cal-day .dow { display:block; font-size:.6rem; text-transform:uppercase; letter-spacing:.9px; color:#909aa5; font-weight:600; margin-bottom:.2rem; }
.cal-day.today .dow { color:#b26a00; }
.cal-day .dom { font-size:1.05rem; font-weight:600; color:#44505b; }
.cal-day.today .dom { color:#cc7300; }
/* Selected day (user current filter) */
.cal-day.selected { border-color:#ffb347; box-shadow:0 0 0 2px rgba(255,180,70,.35) inset,0 3px 10px -3px rgba(255,154,38,.35); }
/* No background change for selected non-today days (only today has background) */
.cal-day.today.selected { box-shadow:0 0 0 2px rgba(255,180,70,.5) inset,0 4px 10px -6px rgba(0,0,0,.25); }
/* Fade animations for dynamic week/month changes */
@keyframes fadeInScale { from { opacity:0; transform:translateY(4px) scale(.975); } to { opacity:1; transform:translateY(0) scale(1); } }
.month-fade { animation:fadeInScale .35s ease; display:inline-block; }
.week-fade { animation:fadeInScale .35s ease; }
/* Panel / cards */
.card-panel { background:#fff; border:1px solid #e4e8ee; border-radius:1.25rem; padding:1.1rem 1.2rem 1.3rem; box-shadow:0 4px 14px -6px rgba(0,0,0,.08); }
.panel-heading { font-size:1.05rem; font-weight:600; margin:0 0 .85rem; }
/* Emoji bar */
.emoji-bar { display:flex; flex-wrap:wrap; justify-content:center; gap:.55rem; margin-bottom:1rem; padding-bottom:.25rem; }
.emoji-bar::-webkit-scrollbar{ height:6px; }
.emoji-bar::-webkit-scrollbar-thumb{ background:#d0d6dc; border-radius:3px; }
.emoji-pill { background:#f3f5f7; border:1px solid #e3e7eb; width:3.1rem; height:3.1rem; border-radius:1rem; display:flex; align-items:center; justify-content:center; font-size:1.55rem; transition:all .18s ease; }
.emoji-pill.active { background:#ffb347; color:#fff; border-color:#ffb347; box-shadow:0 4px 10px -4px rgba(255,161,64,.55); }
.emoji-pill:hover:not(.active){ background:#e9eef2; }
/* Emotion chips */
.emotion-chips { display:flex; flex-wrap:wrap; justify-content:center; gap:.5rem; }
.chip-btn { background:#f4f6f8; border:1px solid #e2e7ec; padding:.4rem .8rem; font-size:.72rem; border-radius:1.25rem; font-weight:500; letter-spacing:.25px; color:#4d5963; transition:all .16s ease; }
.chip-btn.active, .chip-btn:focus { background:#23b5a9; color:#fff; border-color:#23b5a9; box-shadow:0 0 0 .12rem rgba(35,181,169,.25); }
.chip-btn:hover:not(.active){ background:#e8ecef; }
/* Emotions label */
.emotions-title { text-align:left; font-size:.6rem; font-weight:600; letter-spacing:1.1px; text-transform:uppercase; margin:.15rem 0 .55rem; color:#8a95a0; }
/* Support note */
.support-note { margin-top:1rem; background:#fff7e6; border:1px solid #ffe2ad; padding:.75rem .9rem; border-radius:.85rem; font-size:.85rem; line-height:1.25; color:#7a5313; }
/* History */
.history-panel { margin-top:2.25rem; display:flex; flex-direction:column; gap:1.1rem; align-items:center; text-align:center; }
.entry-card { width:100%; }

/* On wider screens keep cards left-aligned inside centered shell for readability */
@media (min-width: 640px) {
	.history-panel { text-align:left; align-items:stretch; }
}

/* Month grid calendar */
.month-grid-wrapper { margin-top:1.5rem; width:100%; max-width:1200px; margin-left:auto; margin-right:auto; padding:0 1rem; }
/* Use 7 equal flexible columns; cells shrink on small viewports instead of causing scrollbars */
.month-grid { display:grid; grid-template-columns:repeat(7, minmax(0,1fr)); gap:.65rem; width:100%; }
/* Responsive scaling: shrink gaps and cell height on narrow widths */
/* Minor padding/spacing adjustments on narrower viewports */
@media (max-width: 900px) {
	.month-grid-wrapper { padding:0 .75rem; }
}
@media (max-width: 700px) {
	.month-grid-wrapper { padding:0 .6rem; }
	.day-entry { font-size:.55rem; }
}
@media (max-width: 560px) {
	.month-grid-wrapper { padding:0 .5rem; }
	.month-day { border-radius:.8rem; }
	.entries-stack { gap:.2rem; }
	.day-entry { padding:.22rem .35rem .25rem; }
	.day-entry .de-emoji { font-size:.8rem; }
	.day-number { font-size:.68rem; }
}
@media (max-width: 420px) {
	.day-entry { font-size:.5rem; }
}
.dow-header { font-size:.65rem; text-transform:uppercase; letter-spacing:1px; font-weight:600; color:#9aa4b0; text-align:center; }
.month-day { background:#fff; border:1px solid #e3e7ec; border-radius:1rem; position:relative; box-shadow:0 4px 10px -6px rgba(0,0,0,.06); cursor:pointer; transition:border-color .18s ease, box-shadow .18s ease, transform .18s ease; overflow:hidden; display:flex; flex-direction:column; gap:.35rem; padding:.55rem .5rem .6rem; min-height:6.2rem; }
.month-day:focus-visible { outline:2px solid #ffb347; outline-offset:2px; }
.month-day:hover { border-color:#d0d6dd; box-shadow:0 6px 16px -8px rgba(0,0,0,.1); }
.month-day:active { transform:scale(.97); }
.month-day.today { background:linear-gradient(145deg,#fff8ec,#ffe9c5); border-color:#ffd08a; }
.month-day.selected { box-shadow:0 0 0 2px #ffb347 inset,0 6px 18px -10px rgba(0,0,0,.12); }
.month-day.outside { opacity:.45; background:linear-gradient(145deg,#fafbfc,#f4f6f8); }
.day-number { font-size:.75rem; font-weight:600; color:#58626c; letter-spacing:.35px; }
.month-day.today .day-number { color:#b26a00; }
.entries-stack { display:flex; flex-direction:column; gap:.25rem; margin-top:auto; overflow:hidden; }
.day-entry { display:flex; align-items:center; gap:.35rem; background:#f5f7f9; border:1px solid #e2e7ec; border-radius:.55rem; padding:.25rem .4rem .28rem; font-size:.6rem; line-height:1.1; font-weight:500; letter-spacing:.2px; color:#4b5660; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }
.day-entry .de-emoji { font-size:.9rem; line-height:1; }
.day-entry .de-text { overflow:hidden; text-overflow:ellipsis; }
.day-entry.sentiment-positive { background:#f0fbf2; border-color:#c2e8c9; color:#2e6b34; }
.day-entry.sentiment-negative { background:#fff1f1; border-color:#f3c7c7; color:#9d2e2e; }
.day-entry.sentiment-neutral { background:#f2f6fa; border-color:#d8e1e8; color:#4b5660; }
.more-indicator { background:#ffb347; color:#fff; font-size:.6rem; font-weight:600; padding:.25rem .45rem .3rem; border-radius:.55rem; align-self:flex-start; }
@media (min-width: 900px) {
	.month-grid-wrapper { max-width:1500px; }
	.day-number { font-size:.8rem; }
	.day-entry { font-size:.62rem; }
}

/* Keep title & month together centered */
.diary-title-group { justify-content:center; }
.entry-card { display:flex; flex-direction:column; gap:.65rem; }
.entry-head { display:flex; align-items:flex-start; gap:.9rem; position:relative; }
.entry-emoji { font-size:2rem; line-height:1; }
.entry-meta { display:flex; flex-direction:column; gap:.15rem; }
.entry-primary { font-weight:600; font-size:.95rem; color:#2e3135; }
.entry-mood { margin-right:.35rem; }
.entry-time { font-size:.6rem; opacity:.75; }
.entry-emotion { font-size:.6rem; opacity:.75; }
.entry-tag { position:absolute; top:0; right:0; background:#ffe3f3; color:#c54686; font-size:.55rem; padding:.3rem .5rem .32rem; border-radius:.75rem; font-weight:600; letter-spacing:.4px; }
.entry-message { font-size:.78rem; line-height:1.35; margin:0; color:#48525c; }
/* Large variant (wide screens) */
@media (min-width: 900px) {
	.calendar-week { gap:.8rem; }
	.cal-day { padding:.7rem .45rem 1rem; }
	.cal-day .dom { font-size:1.2rem; }
	.cal-day .dow { font-size:.65rem; }
	.week-nav-btn { width:2.4rem; height:2.4rem; font-size:1.3rem; }
	.add-entry-btn { width:3.3rem; height:3.3rem; }
	.diary-title { font-size:2.35rem; }
}
/* Modal */
.modal-overlay { position:fixed; inset:0; background:rgba(19,24,28,.45); backdrop-filter:blur(14px) saturate(140%); display:flex; align-items:flex-start; justify-content:center; padding:4.5rem 1rem 2rem; z-index:2000; animation:fadeIn .25s ease; }
.modal-card { width:100%; max-width:640px; background:#fff; border:1px solid #e4e8ee; border-radius:1.35rem; padding:1.25rem 1.25rem 1.1rem; display:flex; flex-direction:column; gap:1rem; box-shadow:0 18px 48px -18px rgba(0,0,0,.25); }
.modal-head { display:flex; justify-content:space-between; align-items:center; }
.modal-title { font-size:1.2rem; font-weight:600; margin:0; }
.close-btn { background:transparent; border:none; font-size:1.6rem; line-height:1; cursor:pointer; color:#7a8691; }
.close-btn:hover { color:#000; }
.modal-body { display:flex; flex-direction:column; gap:.75rem; }
.modal-footer { display:flex; justify-content:flex-end; gap:.65rem; }
@keyframes fadeIn { from { opacity:0; transform:translateY(10px);} to { opacity:1; transform:translateY(0);} }
.visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
